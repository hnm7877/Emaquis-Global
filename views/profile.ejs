<!DOCTYPE html>
<html lang="zxx">
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NT2SW8WBHT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-NT2SW8WBHT');
  </script>
  <!-- End Google tag (gtag.js) -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>E-maquis Profile</title>

  <!-- App css -->
  <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
  <link href="assets/css/theme.min.css" rel="stylesheet" type="text/css" />
  <link href="assets/css/style.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="css/metisMenu.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/driver.js@1.0.1/dist/driver.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />

  <script src="/assets/js/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/driver.js@1.0.1/dist/driver.js.iife.js"></script>

  


  <%- include('partial/newHead.ejs') %>


</head>

<body class="crm_body_bg">
  <style>
    :root {
      --primary-color: #2C3E50;
      --secondary-color: #3498DB;
      --accent-color: #E74C3C;
      --success-color: #2ECC71;
      --text-color: #2C3E50;
      --light-bg: #F8F9FA;
      --border-radius: 12px;
      --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    body {
      background-color: var(--light-bg);
      color: var(--text-color);
    }

    .white_card {
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      background: white;
      transition: transform 0.3s ease;
    }

    .white_card:hover {
      transform: translateY(-5px);
    }

    .white_card_header {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 1.5rem;
      border-radius: var(--border-radius) var(--border-radius) 0 0;
    }

    .main-title h3 {
      font-size: 1.8rem;
      font-weight: 600;
      margin: 0;
      color: white;
    }

    .form-control, .form-select {
      border: 2px solid #E9ECEF !important;
      border-radius: 8px;
      background: #fff;
      color: #2C3E50;
      font-size: 1rem;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .form-control:focus, .form-select:focus {
      border-color: #3498DB !important; /* bleu doux */
      box-shadow: 0 0 0 2px rgba(52,152,219,0.15);
      outline: none;
    }

    .form-control option, .form-select option {
      color: #2C3E50;
      background: #fff;
    }

    .labels {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 0.5rem;
    }

    .profile-button {
      background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 25px;
      font-weight: 600;
      letter-spacing: 0.5px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(52, 152, 219, 0.2);
    }

    .profile-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(52, 152, 219, 0.3);
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    }

    .premium-feature-title {
      background: linear-gradient(135deg, #FFA500, #FF4500);
      padding: 1.5rem;
      border-radius: var(--border-radius);
      margin: 2rem 0;
      text-align: center;
      color: white;
    }

    .premium-feature-title h2 {
      font-size: 1.8rem;
      font-weight: 700;
      margin: 0;
    }

    .premium-row {
      background: white;
      padding: 1rem;
      border-radius: var(--border-radius);
      margin-bottom: 1rem;
      box-shadow: var(--box-shadow);
      transition: all 0.3s ease;
    }

    .premium-row:hover {
      transform: translateX(5px);
    }

    .premium-checkbox {
      width: 20px;
      height: 20px;
      accent-color: var(--secondary-color);
    }

    .premium-label {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--primary-color);
    }

    .lock-icon {
      background: rgba(52, 152, 219, 0.1);
      color: var(--secondary-color);
      transition: all 0.3s ease;
      margin-top: 4px;
      align-self: flex-start;
    }

    .lock-icon:hover {
      background: var(--secondary-color);
      color: white;
    }

    .forfait-modal-content {
      background: white;
      border-radius: var(--border-radius);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .forfait-card {
      background: white;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      transition: all 0.3s ease;
    }

    .forfait-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .forfait-btn {
      background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 25px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .forfait-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
    }

    .profile-image-container {
      position: relative;
      margin-bottom: 2rem;
    }

    .profile-image {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid var(--secondary-color);
      box-shadow: 0 4px 15px rgba(52, 152, 219, 0.2);
    }

    .profile-info {
      text-align: center;
      margin-top: 1rem;
    }

    .profile-name {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-color);
      margin: 0.5rem 0;
    }

    .profile-email {
      color: var(--secondary-color);
      font-size: 1rem;
    }

    .section-title {
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid var(--secondary-color);
    }

    .form-section {
      background: white;
      padding: 2rem;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      margin-bottom: 2rem;
    }

    .form-control:focus {
      box-shadow: none;
      border-color: #98ED58
    }

    .profile-button:focus {
      background: #98ED58;
      box-shadow: none
    }

    .profile-button:active {
      background: #98ED58;
      box-shadow: none
    }

    .back:hover {
      color: #98ED58;
      cursor: pointer
    }

    .add-experience:hover {
      background: #98ED58;
      color: #fff;
      cursor: pointer;
      border: solid 1px #98ED58
    }

    .lock-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      font-size: 1.25rem;
      background: rgba(152, 237, 88, 0.13);
      border-radius: 50%;
      box-shadow: 0 2px 8px rgba(152, 237, 88, 0.10);
      transition: background 0.2s, color 0.2s, transform 0.2s;
      margin: 0;
      cursor: pointer;
    }
    .lock-icon.lock-orange {
      color: #FFA500;
      background: rgba(255, 165, 0, 0.13);
    }
    .lock-icon.lock-green {
      color: #98ED58;
      background: rgba(152, 237, 88, 0.13);
    }
    .lock-icon.lock-orange:hover {
      background: #FFA500;
      color: #fff;
    }
    .lock-icon.lock-green:hover {
      background: #98ED58;
      color: #fff;
    }
    .checkbox-disabled {
      opacity: 0.5;
      pointer-events: none;
    }

    .subscription-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
    }

    .subscription-modal-content {
      position: relative;
      background-color: #fff;
      margin: 15% auto;
      padding: 20px;
      width: 50%;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      animation: modalFadeIn 0.3s;
    }

    @keyframes modalFadeIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .subscription-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .subscription-modal-title {
      color: #333;
      font-size: 24px;
      margin: 0;
    }

    .subscription-modal-close {
      color: #666;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }

    .subscription-modal-body {
      color: #666;
      font-size: 16px;
      line-height: 1.5;
      margin-bottom: 20px;
    }

    .subscription-modal-footer {
      text-align: right;
    }

    .subscription-modal-button {
      background-color: #98ED58;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s;
    }

    .subscription-modal-button:hover {
      background-color: #7ed321;
    }

    .premium-row {
      display: flex;
      align-items: flex-start;
      gap: 1.2rem;
      min-height: 80px;
      margin-bottom: 18px;
      padding: 16px;
      position: relative;
    }
    .premium-tooltip {
      display: block;
      position: static;
      transform: none;
      min-width: auto;
      background: transparent;
      color: #666;
      font-size: 0.9rem;
      font-weight: 400;
      border-radius: 0;
      box-shadow: none;
      padding: 8px 0 0 0;
      z-index: auto;
      text-align: left;
      pointer-events: auto;
      opacity: 1;
      transition: none;
      margin-top: 8px;
      line-height: 1.4;
    }
    .premium-label {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      width: 100%;
    }
    .premium-label:hover .premium-tooltip,
    .premium-label:focus .premium-tooltip {
      display: block;
      opacity: 1;
      pointer-events: auto;
    }
    .premium-tooltip::before {
      display: none;
    }

    .forfait-modal {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 2000;
    }
    .forfait-modal-close {
      position: absolute;
      top: 18px; right: 24px;
      font-size: 2rem;
      color: #FFA500;
      cursor: pointer;
      font-weight: bold;
      transition: color 0.2s;
    }
    .forfait-modal-close:hover {
      color: #FF4500;
    }
    .forfait-modal-title {
      text-align: center;
      font-size: 2rem;
      font-weight: bold;
      color: #FFA500;
      margin-bottom: 32px;
      letter-spacing: 0.5px;
    }
    .forfait-cards {
      display: flex;
      gap: 32px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 10px;
    }
    .forfait-card {
      background: linear-gradient(135deg, #fff7e6 0%, #ffe5b4 100%);
      border-radius: 18px;
      box-shadow: 0 4px 18px rgba(255, 165, 0, 0.13);
      padding: 32px 24px 28px 24px;
      min-width: 240px;
      max-width: 280px;
      text-align: center;
      transition: box-shadow 0.2s, transform 0.2s;
      border: 2px solid #FFA50022;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .forfait-card.popular {
      border: 2.5px solid #FF4500;
      box-shadow: 0 8px 32px rgba(255, 69, 0, 0.13);
    }
    .forfait-badge-popular {
      position: absolute;
      top: -18px;
      left: 50%;
      transform: translateX(-50%);
      background: #FF4500;
      color: #fff;
      font-size: 0.85rem;
      font-weight: bold;
      padding: 4px 16px;
      border-radius: 12px;
      letter-spacing: 0.5px;
      box-shadow: 0 2px 8px rgba(255, 69, 0, 0.13);
      z-index: 2;
    }
    .forfait-icon {
      font-size: 3.2rem;
      color: #FFA500;
      margin-bottom: 18px;
      margin-top: 8px;
      filter: drop-shadow(0 2px 6px #ffa50033);
    }
    .forfait-card.popular .forfait-icon {
      color: #FF4500;
      filter: drop-shadow(0 2px 8px #ff450033);
    }
    .forfait-price {
      font-size: 2.2rem;
      font-weight: bold;
      color: #FF4500;
      margin: 10px 0 8px 0;
      letter-spacing: 1px;
    }
    .forfait-desc {
      font-size: 1.13rem;
      color: #444;
      margin-bottom: 22px;
      font-weight: 500;
    }
    .forfait-btn {
      background: linear-gradient(90deg, #FFA500 0%, #FF4500 100%);
      color: #fff;
      border: none;
      border-radius: 24px;
      padding: 12px 0;
      width: 100%;
      font-size: 1.08rem;
      font-weight: 700;
      cursor: pointer;
      transition: background 0.2s, transform 0.2s;
      margin-top: 8px;
      box-shadow: 0 2px 8px rgba(255, 165, 0, 0.10);
      letter-spacing: 0.5px;
    }
    .forfait-btn:hover {
      background: linear-gradient(90deg, #FF4500 0%, #FFA500 100%);
      transform: scale(1.04);
    }
    /* Responsive pour les modals */
    @media (max-width: 992px) {
      .forfait-modal-content {
        width: 90%;
        margin: 10% auto;
        padding: 2rem;
      }

      .subscription-modal-content {
        width: 90%;
        margin: 10% auto;
        padding: 1.5rem;
      }
    }

    @media (max-width: 768px) {
      .forfait-cards {
        flex-direction: column;
        gap: 1.5rem;
      }

      .forfait-card {
        min-width: 100%;
        max-width: 100%;
      }

      .forfait-modal-content {
        width: 95%;
        margin: 5% auto;
        padding: 1.5rem;
        max-height: 90vh;
        overflow-y: auto;
      }

      .forfait-modal-title {
        font-size: 1.5rem;
        margin-bottom: 1.5rem;
      }

      .forfait-icon {
        font-size: 2.5rem;
      }

      .forfait-price {
        font-size: 1.75rem;
      }

      .forfait-desc {
        font-size: 1rem;
      }

      .subscription-modal-content {
        width: 95%;
        margin: 5% auto;
        padding: 1.25rem;
        max-height: 90vh;
        overflow-y: auto;
      }

      .subscription-modal-title {
        font-size: 1.5rem;
      }

      .subscription-modal-body {
        font-size: 0.9375rem;
      }
    }

    @media (max-width: 576px) {
      .forfait-modal-content {
        padding: 1rem;
        border-radius: 12px;
      }

      .forfait-modal-title {
        font-size: 1.25rem;
        margin-bottom: 1rem;
      }

      .forfait-icon {
        font-size: 2rem;
        margin-bottom: 1rem;
      }

      .forfait-price {
        font-size: 1.5rem;
      }

      .forfait-desc {
        font-size: 0.9375rem;
        margin-bottom: 1rem;
      }

      .forfait-btn {
        padding: 0.875rem 0;
        font-size: 0.9375rem;
      }

      .subscription-modal-content {
        padding: 1rem;
        border-radius: 12px;
      }

      .subscription-modal-title {
        font-size: 1.25rem;
      }

      .subscription-modal-body {
        font-size: 0.875rem;
        padding: 0;
      }

      .subscription-modal-button {
        width: 100%;
        padding: 0.75rem;
      }
    }

    @media (max-width: 400px) {
      .forfait-modal-content {
        padding: 0.75rem;
      }

      .forfait-modal-title {
        font-size: 1.125rem;
      }

      .subscription-modal-content {
        padding: 0.75rem;
      }
    }
  </style>

  <%- include('partial/newSideBar.ejs') %>
  <%- include('partial/scriptNewTemp.ejs') %>
  <!--/ sidebar  -->

  <section class="main_content dashboard_part large_header_bg">
    <!-- menu  -->

    <style>
      .profile-modern-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 2rem;
      }

      .profile-header-modern {
        background: linear-gradient(135deg, #1e40af 0%, #2563eb 50%, #3b82f6 100%);
        border-radius: 24px;
        padding: 3.5rem 3rem;
        margin-bottom: 2.5rem;
        color: white;
        box-shadow: 0 20px 60px rgba(37, 99, 235, 0.35), 0 0 0 1px rgba(255, 255, 255, 0.1) inset;
        animation: fadeInDown 0.6s ease;
        position: relative;
        overflow: hidden;
        border: 2px solid rgba(255, 255, 255, 0.2);
      }

      .profile-header-modern::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
        animation: pulse 3s ease-in-out infinite;
      }

      .profile-header-modern h1 {
        font-size: 3.25rem;
        font-weight: 800;
        margin: 0 0 1rem 0;
        display: flex;
        align-items: center;
        gap: 1.25rem;
        color: #ffffff;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        letter-spacing: -0.02em;
        position: relative;
        z-index: 1;
      }

      .profile-header-modern h1 i {
        font-size: 3.5rem;
        color: #ffffff;
        filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.2));
        animation: iconFloat 3s ease-in-out infinite;
      }

      .profile-header-modern p {
        font-size: 1.25rem;
        opacity: 1;
        margin: 0;
        color: #ffffff;
        font-weight: 400;
        line-height: 1.6;
        text-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);
        position: relative;
        z-index: 1;
      }

      @keyframes iconFloat {
        0%, 100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-8px);
        }
      }

      @keyframes pulse {
        0%, 100% {
          opacity: 0.3;
        }
        50% {
          opacity: 0.6;
        }
      }

      .profile-card-modern {
        background: white;
        border-radius: 20px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border: 1px solid #e2e8f0;
      }

      .profile-card-modern:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
      }

      .profile-card-modern h3 {
        font-size: 1.5rem;
        font-weight: 700;
        color: #0f172a;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid #e2e8f0;
      }

      .profile-card-modern h3 i {
        color: #2563eb;
        font-size: 1.3rem;
      }

      .profile-avatar-section {
        text-align: center;
        padding: 2rem;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        border-radius: 20px;
        margin-bottom: 2rem;
      }

      .profile-avatar-modern {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        object-fit: cover;
        border: 5px solid white;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        margin-bottom: 1.5rem;
      }

      .profile-name-modern {
        font-size: 1.75rem;
        font-weight: 700;
        color: #0f172a;
        margin: 0.5rem 0;
      }

      .profile-email-modern {
        color: #64748b;
        font-size: 1rem;
        margin-bottom: 1rem;
      }

      .profile-badge-modern {
        display: inline-block;
        padding: 0.5rem 1rem;
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 600;
        margin-top: 0.5rem;
      }

      .form-group-modern {
        margin-bottom: 1.5rem;
      }

      .form-label-modern {
        display: block;
        font-size: 0.9375rem;
        font-weight: 600;
        color: #334155;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .form-label-modern i {
        color: #2563eb;
        font-size: 0.875rem;
      }

      .form-input-modern {
        width: 100%;
        padding: 0.875rem 1.25rem;
        font-size: 1rem;
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        transition: all 0.3s ease;
        background: #ffffff;
        color: #0f172a;
      }

      .form-input-modern:focus {
        outline: none;
        border-color: #2563eb;
        box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
      }

      .form-select-modern {
        width: 100%;
        padding: 0.875rem 1.25rem;
        font-size: 1rem;
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        transition: all 0.3s ease;
        background: #ffffff;
        color: #0f172a;
        cursor: pointer;
      }

      .form-select-modern:focus {
        outline: none;
        border-color: #2563eb;
        box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
      }

      .btn-save-modern {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        border: none;
        padding: 1rem 2.5rem;
        border-radius: 12px;
        font-size: 1.0625rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }

      .btn-save-modern:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
      }

      .password-section-modern {
        background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        border-radius: 16px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        border: 2px solid #f59e0b;
      }

      .password-section-modern h4 {
        color: #92400e;
        font-size: 1.125rem;
        font-weight: 600;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .premium-section-modern {
        background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%);
        border-radius: 20px;
        padding: 2rem;
        border: 2px solid #ffa500;
      }

      .premium-header-modern {
        text-align: center;
        margin-bottom: 2rem;
      }

      .premium-header-modern h2 {
        font-size: 2rem;
        font-weight: 700;
        color: #ff4500;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
      }

      .premium-badge-modern {
        display: inline-block;
        background: linear-gradient(135deg, #ffa500 0%, #ff4500 100%);
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 25px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(255, 165, 0, 0.3);
        margin-top: 1rem;
      }

      .premium-badge-modern:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(255, 165, 0, 0.4);
      }

      .premium-feature-item-modern {
        background: white;
        border-radius: 16px;
        padding: 1.5rem;
        margin-bottom: 1rem;
        border: 2px solid #e2e8f0;
        transition: all 0.3s ease;
        display: flex;
        align-items: flex-start;
        gap: 1rem;
      }

      .premium-feature-item-modern:hover {
        border-color: #ffa500;
        box-shadow: 0 4px 15px rgba(255, 165, 0, 0.1);
      }

      .premium-feature-item-modern.active {
        border-color: #10b981;
        background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
      }

      .currency-badge-modern {
        display: inline-flex;
        align-items: center;
        padding: 0.5rem 1rem;
        background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
        color: #1e40af;
        border-radius: 20px;
        font-weight: 600;
        font-size: 0.875rem;
        margin-left: 0.5rem;
      }

      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .fade-in-modern {
        animation: fadeIn 0.6s ease;
      }

      /* Tablettes et écrans moyens (768px - 992px) */
      @media (max-width: 992px) {
        .profile-modern-container {
          padding: 1rem;
        }

        .profile-header-modern {
          padding: 2.5rem 2rem;
        }

        .profile-header-modern h1 {
          font-size: 2.5rem;
        }

        .profile-header-modern h1 i {
          font-size: 2.75rem;
        }

        .profile-header-modern p {
          font-size: 1.125rem;
        }

        .profile-card-modern {
          padding: 1.5rem;
        }

        .profile-card-modern h3 {
          font-size: 1.3rem;
        }

        .profile-avatar-modern {
          width: 120px;
          height: 120px;
        }

        .profile-name-modern {
          font-size: 1.5rem;
        }

        .premium-header-modern h2 {
          font-size: 1.75rem;
        }
      }

      /* Tablettes portrait et petits écrans (576px - 768px) */
      @media (max-width: 768px) {
        .profile-modern-container {
          padding: 0.75rem;
        }

        .profile-header-modern {
          padding: 2rem 1.5rem;
          border-radius: 20px;
        }

        .profile-header-modern h1 {
          font-size: 2.25rem;
          flex-direction: column;
          align-items: flex-start;
          gap: 0.75rem;
          margin-bottom: 0.75rem;
        }

        .profile-header-modern h1 i {
          font-size: 2.5rem;
        }

        .profile-header-modern p {
          font-size: 1.0625rem;
        }

        .profile-card-modern {
          padding: 1.25rem;
          border-radius: 16px;
          margin-bottom: 1.5rem;
        }

        .profile-card-modern h3 {
          font-size: 1.25rem;
          margin-bottom: 1.25rem;
        }

        .profile-avatar-section {
          padding: 1.5rem;
        }

        .profile-avatar-modern {
          width: 100px;
          height: 100px;
          margin-bottom: 1rem;
        }

        .profile-name-modern {
          font-size: 1.25rem;
        }

        .profile-email-modern {
          font-size: 0.9375rem;
        }

        .form-group-modern {
          margin-bottom: 1.25rem;
        }

        .form-label-modern {
          font-size: 0.875rem;
        }

        .form-input-modern,
        .form-select-modern {
          padding: 0.75rem 1rem;
          font-size: 0.9375rem;
        }

        .btn-save-modern {
          padding: 0.875rem 2rem;
          font-size: 1rem;
          width: 100%;
        }

        .premium-section-modern {
          padding: 1.5rem;
        }

        .premium-header-modern h2 {
          font-size: 1.5rem;
          flex-wrap: wrap;
        }

        .premium-badge-modern {
          padding: 0.625rem 1.25rem;
          font-size: 0.9375rem;
          width: 100%;
          text-align: center;
        }

        .premium-feature-item-modern {
          padding: 1.25rem;
          flex-direction: column;
          gap: 0.75rem;
        }

        .premium-feature-item-modern label {
          width: 100%;
        }

        .password-section-modern {
          padding: 1.25rem;
        }

        .currency-badge-modern {
          font-size: 0.8125rem;
          padding: 0.375rem 0.75rem;
        }

        /* Empiler les colonnes sur mobile */
        .row > [class*="col-"] {
          margin-bottom: 1rem;
        }
      }

      /* Petits écrans mobiles (max-width: 576px) */
      @media (max-width: 576px) {
        .profile-modern-container {
          padding: 0.5rem;
        }

        .profile-header-modern {
          padding: 1.75rem 1.25rem;
          border-radius: 16px;
        }

        .profile-header-modern h1 {
          font-size: 2rem;
        }

        .profile-header-modern h1 i {
          font-size: 2.25rem;
        }

        .profile-header-modern p {
          font-size: 1rem;
        }

        .profile-card-modern {
          padding: 1rem;
          border-radius: 12px;
          margin-bottom: 1rem;
        }

        .profile-card-modern h3 {
          font-size: 1.125rem;
          margin-bottom: 1rem;
          padding-bottom: 0.75rem;
        }

        .profile-card-modern h3 i {
          font-size: 1.125rem;
        }

        .profile-avatar-section {
          padding: 1rem;
          border-radius: 12px;
        }

        .profile-avatar-modern {
          width: 80px;
          height: 80px;
          border-width: 3px;
          margin-bottom: 0.75rem;
        }

        .profile-name-modern {
          font-size: 1.125rem;
        }

        .profile-email-modern {
          font-size: 0.875rem;
        }

        .profile-badge-modern {
          font-size: 0.75rem;
          padding: 0.375rem 0.75rem;
        }

        .form-group-modern {
          margin-bottom: 1rem;
        }

        .form-label-modern {
          font-size: 0.8125rem;
          margin-bottom: 0.375rem;
        }

        .form-label-modern i {
          font-size: 0.75rem;
        }

        .form-input-modern,
        .form-select-modern {
          padding: 0.625rem 0.875rem;
          font-size: 0.875rem;
          border-radius: 10px;
        }

        .btn-save-modern {
          padding: 0.75rem 1.5rem;
          font-size: 0.9375rem;
          border-radius: 10px;
        }

        .password-section-modern {
          padding: 1rem;
          border-radius: 12px;
        }

        .password-section-modern h4 {
          font-size: 1rem;
          margin-bottom: 0.75rem;
        }

        .premium-section-modern {
          padding: 1rem;
          border-radius: 16px;
        }

        .premium-header-modern {
          margin-bottom: 1.5rem;
        }

        .premium-header-modern h2 {
          font-size: 1.25rem;
          margin-bottom: 0.75rem;
        }

        .premium-header-modern h2 i {
          font-size: 1.125rem;
        }

        .new-badge {
          font-size: 0.625rem;
          padding: 0.125rem 0.5rem;
          margin-left: 0.25rem;
        }

        .premium-badge-modern {
          padding: 0.5rem 1rem;
          font-size: 0.875rem;
          border-radius: 20px;
        }

        .premium-feature-item-modern {
          padding: 1rem;
          border-radius: 12px;
          margin-bottom: 0.75rem;
        }

        .premium-feature-item-modern label span {
          font-size: 0.9375rem;
        }

        .premium-tooltip {
          font-size: 0.8125rem !important;
        }

        .lock-icon {
          width: 28px;
          height: 28px;
          font-size: 1rem;
        }

        .currency-badge-modern {
          font-size: 0.75rem;
          padding: 0.25rem 0.625rem;
          margin-left: 0.25rem;
        }

        /* Empiler tous les champs sur très petits écrans */
        .row > [class*="col-"] {
          flex: 0 0 100%;
          max-width: 100%;
          margin-bottom: 0.75rem;
        }

        /* Ajuster les flexbox pour le sélecteur de pays */
        .form-group-modern div[style*="display: flex"] {
          flex-direction: column;
          align-items: stretch !important;
        }

        .form-group-modern div[style*="display: flex"] select {
          width: 100% !important;
          min-width: 100% !important;
          margin-bottom: 0.5rem;
        }

        .form-group-modern div[style*="display: flex"] .currency-badge-modern {
          width: 100%;
          text-align: center;
          margin-left: 0;
        }

        /* Ajuster les espacements */
        .mt-4 {
          margin-top: 1rem !important;
        }

        .mt-5 {
          margin-top: 1.25rem !important;
        }
      }

      /* Très petits écrans (max-width: 400px) */
      @media (max-width: 400px) {
        .profile-modern-container {
          padding: 0.25rem;
        }

        .profile-header-modern {
          padding: 0.875rem;
        }

        .profile-header-modern h1 {
          font-size: 1.25rem;
        }

        .profile-card-modern {
          padding: 0.875rem;
        }

        .form-input-modern,
        .form-select-modern {
          padding: 0.5rem 0.75rem;
          font-size: 0.8125rem;
        }

        .btn-save-modern {
          padding: 0.625rem 1.25rem;
          font-size: 0.875rem;
        }
      }

      /* Grands écrans (min-width: 1200px) */
      @media (min-width: 1200px) {
        .profile-modern-container {
          max-width: 1400px;
        }

        .profile-card-modern {
          padding: 2.5rem;
        }

        .profile-header-modern {
          padding: 3rem;
        }
      }

      /* Orientation paysage sur mobile */
      @media (max-width: 768px) and (orientation: landscape) {
        .profile-header-modern {
          padding: 1rem;
        }

        .profile-header-modern h1 {
          font-size: 1.5rem;
        }

        .profile-card-modern {
          padding: 1rem;
        }
      }

      .new-badge {
        background-color: #FF4500;
        color: #fff;
        font-size: 0.75rem;
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        margin-left: 0.5rem;
        animation: bounce 1.5s infinite;
        font-weight: 600;
      }

      @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
        40% { transform: translateY(-10px); }
        60% { transform: translateY(-5px); }
      }
    </style>

    <div class="main_content_iner">
      <div class="container-fluid p-0">
        <div class="profile-modern-container">
          <!-- Header -->
          <div class="profile-header-modern fade-in-modern">
            <h1>
              <i class="fas fa-user-circle"></i>
              MON PROFIL
            </h1>
            <p>Gérez vos informations personnelles et vos paramètres de compte</p>
          </div>

          <form action='/profile' method='post'>
            <div class="row">
              <!-- Colonne gauche - Avatar et informations -->
              <div class="col-lg-4 col-md-12 col-sm-12 mb-4">
                <div class="profile-card-modern fade-in-modern">
                  <div class="profile-avatar-section">
                    <img class="profile-avatar-modern" src="https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg" alt="Avatar">
                    <h2 class="profile-name-modern"><%= user?.nom %> <%= user?.prenom %></h2>
                    <p class="profile-email-modern">
                      <i class="fas fa-envelope"></i>
                      <%= user.email %>
                    </p>
                    <span class="profile-badge-modern">
                      <i class="fas fa-check-circle"></i>
                      Compte actif
                    </span>
                  </div>
                </div>

                <!-- Section Mot de passe -->
                <div class="profile-card-modern fade-in-modern">
                  <h3>
                    <i class="fas fa-lock"></i>
                    Sécurité
                  </h3>
                  <div class="password-section-modern">
                    <h4>
                      <i class="fas fa-info-circle"></i>
                      Changer votre mot de passe ?
                    </h4>
                    <p style="font-size: 0.875rem; color: #92400e; margin-bottom: 1rem;">
                      Laissez les champs vides si vous ne souhaitez pas modifier votre mot de passe
                    </p>
                    <div class="form-group-modern">
                      <label class="form-label-modern">
                        <i class="fas fa-key"></i>
                        Nouveau mot de passe
                      </label>
                      <input type="password" class="form-input-modern" name='newPassword' placeholder="Entrez un nouveau mot de passe" value="">
                    </div>
                    <div class="form-group-modern">
                      <label class="form-label-modern">
                        <i class="fas fa-check-double"></i>
                        Confirmer le mot de passe
                      </label>
                      <input type="password" class="form-input-modern" name='confirmPassword' placeholder="Confirmez le mot de passe" value="">
                    </div>
                  </div>
                </div>

                <!-- Section Premium -->
                <div class="premium-section-modern fade-in-modern">
                  <div class="premium-header-modern">
                    <h2>
                      <i class="fas fa-crown"></i>
                      Fonctionnalités Premium
                      <span class="new-badge">Nouveauté</span>
                    </h2>
                    <span class="premium-badge-modern" id="openForfaitModal">
                      <i class="fas fa-gift"></i>
                      Voir les forfaits
                    </span>
                  </div>

                  <div class="premium-feature-item-modern <%= user?.hasStock ? 'active' : '' %>">
                    <% if (user?.hasStock) { %>
                      <input id="cbx-12-stock" type="checkbox" checked name="hasStock" class="premium-checkbox" style="margin-top: 0.25rem;">
                      <label for="cbx-12-stock" class="premium-label" data-locked="false" tabindex="0" style="flex: 1; margin: 0;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;">
                          <span style="font-weight: 600; color: #0f172a; font-size: 1.0625rem;">
                            <i class="fas fa-boxes" style="color: #10b981; margin-right: 0.5rem;"></i>
                            Réserve de stock
                          </span>
                          <i class="fas fa-lock-open lock-icon lock-green" data-feature="stock" data-locked="false"></i>
                        </div>
                        <span class="premium-tooltip" style="font-size: 0.875rem; color: #64748b; line-height: 1.5;">
                          Activez la gestion avancée de votre stock pour éviter les ruptures et optimiser vos approvisionnements.
                        </span>
                      </label>
                    <% } else { %>
                      <input type='checkbox' id='cbx-12-stock' name="hasStock" class="premium-checkbox checkbox-disabled" style="margin-top: 0.25rem;" />
                      <label for="cbx-12-stock" class="premium-label" data-locked="true" tabindex="0" style="flex: 1; margin: 0;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;">
                          <span style="font-weight: 600; color: #0f172a; font-size: 1.0625rem;">
                            <i class="fas fa-boxes" style="color: #ffa500; margin-right: 0.5rem;"></i>
                            Réserve de stock
                          </span>
                          <i class="fas fa-lock lock-icon lock-orange" data-feature="stock" data-locked="true"></i>
                        </div>
                        <span class="premium-tooltip" style="font-size: 0.875rem; color: #64748b; line-height: 1.5;">
                          Activez la gestion avancée de votre stock pour éviter les ruptures et optimiser vos approvisionnements.
                        </span>
                      </label>
                    <% } %>
                  </div>

                  <div class="premium-feature-item-modern <%= user?.hasOffer ? 'active' : '' %>">
                    <% if (user?.hasOffer) { %>
                      <input id="cbx-12-offer" type="checkbox" checked name="hasOffer" class="premium-checkbox" style="margin-top: 0.25rem;">
                      <label for="cbx-12-offer" class="premium-label" data-locked="false" tabindex="0" style="flex: 1; margin: 0;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;">
                          <span style="font-weight: 600; color: #0f172a; font-size: 1.0625rem;">
                            <i class="fas fa-gift" style="color: #10b981; margin-right: 0.5rem;"></i>
                            Boissons offertes
                          </span>
                          <i class="fas fa-lock-open lock-icon lock-green" data-feature="offer" data-locked="false"></i>
                        </div>
                        <span class="premium-tooltip" style="font-size: 0.875rem; color: #64748b; line-height: 1.5;">
                          Cette option vous donne l'opportunité d'offrir des boissons à vos clients tout en ayant la traçabilité des boissons offertes.
                        </span>
                      </label>
                    <% } else { %>
                      <input type='checkbox' id='cbx-12-offer' name="hasOffer" class="premium-checkbox checkbox-disabled" style="margin-top: 0.25rem;" />
                      <label for="cbx-12-offer" class="premium-label" data-locked="true" tabindex="0" style="flex: 1; margin: 0;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;">
                          <span style="font-weight: 600; color: #0f172a; font-size: 1.0625rem;">
                            <i class="fas fa-gift" style="color: #ffa500; margin-right: 0.5rem;"></i>
                            Boissons offertes
                          </span>
                          <i class="fas fa-lock lock-icon lock-orange" data-feature="offer" data-locked="true"></i>
                        </div>
                        <span class="premium-tooltip" style="font-size: 0.875rem; color: #64748b; line-height: 1.5;">
                          Cette option vous donne l'opportunité d'offrir des boissons à vos clients tout en ayant la traçabilité des boissons offertes.
                        </span>
                      </label>
                    <% } %>
                  </div>

                  <div class="premium-feature-item-modern <%= user?.hasSubCategories ? 'active' : '' %>">
                    <% if (user?.hasSubCategories) { %>
                      <input id="cbx-12-SubCategories" type="checkbox" checked name="hasSubCategories" class="premium-checkbox" style="margin-top: 0.25rem;">
                      <label for="cbx-12-SubCategories" class="premium-label" data-locked="false" tabindex="0" style="flex: 1; margin: 0;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;">
                          <span style="font-weight: 600; color: #0f172a; font-size: 1.0625rem;">
                            <i class="fas fa-utensils" style="color: #10b981; margin-right: 0.5rem;"></i>
                            Option nourriture
                          </span>
                          <i class="fas fa-lock-open lock-icon lock-green" data-feature="subcategories" data-locked="false"></i>
                        </div>
                        <span class="premium-tooltip" style="font-size: 0.875rem; color: #64748b; line-height: 1.5;">
                          Permet de proposer et gérer des sous-catégories de plats pour une carte plus flexible et détaillée.
                        </span>
                      </label>
                    <% } else { %>
                      <input type='checkbox' id='cbx-12-SubCategories' name="hasSubCategories" class="premium-checkbox checkbox-disabled" style="margin-top: 0.25rem;" />
                      <label for="cbx-12-SubCategories" class="premium-label" data-locked="true" tabindex="0" style="flex: 1; margin: 0;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;">
                          <span style="font-weight: 600; color: #0f172a; font-size: 1.0625rem;">
                            <i class="fas fa-utensils" style="color: #ffa500; margin-right: 0.5rem;"></i>
                            Option nourriture
                          </span>
                          <i class="fas fa-lock lock-icon lock-orange" data-feature="subcategories" data-locked="true"></i>
                        </div>
                        <span class="premium-tooltip" style="font-size: 0.875rem; color: #64748b; line-height: 1.5;">
                          Permet de proposer et gérer des sous-catégories de plats pour une carte plus flexible et détaillée.
                        </span>
                      </label>
                    <% } %>
                  </div>
                </div>
              </div>

              <!-- Colonne droite - Formulaire principal -->
              <div class="col-lg-8 col-md-12 col-sm-12">
                <div class="profile-card-modern fade-in-modern">
                  <h3>
                    <i class="fas fa-user-edit"></i>
                    Informations personnelles
                  </h3>
                  
                  <div class='alert alert-danger' style='display: none;'></div>

                  <div class="row">
                    <div class="col-md-6 col-sm-12 form-group-modern" id="element-nom">
                      <label class="form-label-modern">
                        <i class="fas fa-user"></i>
                        Nom
                      </label>
                      <input type="text" class="form-input-modern" placeholder="Votre nom" name='nom' value="<%= user.nom %>" required>
                    </div>
                    <div class="col-md-6 col-sm-12 form-group-modern" id="element-prenom">
                      <label class="form-label-modern">
                        <i class="fas fa-user"></i>
                        Prénom
                      </label>
                      <input type="text" class="form-input-modern" name='prenoms' value="<%= user.prenoms %>" placeholder="Votre prénom" required>
                    </div>
                  </div>

                  <div class="form-group-modern">
                    <label class="form-label-modern">
                      <i class="fas fa-building"></i>
                      Nom de l'établissement
                    </label>
                    <input type="text" class="form-input-modern" name='nom_etablissement' placeholder="Nom de votre établissement" value="<%= user.nom_etablissement %>">
                  </div>

                  <div class="form-group-modern">
                    <label class="form-label-modern">
                      <i class="fas fa-phone"></i>
                      Téléphone
                    </label>
                    <input type="text" class="form-input-modern" name='numero' placeholder="Votre numéro de téléphone" value="<%= user.numero %>">
                  </div>

                  <div class="form-group-modern">
                    <label class="form-label-modern">
                      <i class="fas fa-map-marker-alt"></i>
                      Adresse
                    </label>
                    <input type="text" class="form-input-modern" name="adresse" placeholder="Votre adresse" value="<%= user.adresse %>">
                  </div>

                  <div class="row">
                    <div class="col-md-6 col-sm-12 form-group-modern">
                      <label class="form-label-modern" for="country">
                        <i class="fas fa-globe"></i>
                        Pays
                      </label>
                      <div style="display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap;">
                        <select class='form-select-modern' id="country" name="country" style="flex: 1; min-width: 200px;">
                          <% for (var i = 0; i < pays.length; i++) { %>
                            <option value="<%= pays[i].code %>" <% if (pays[i].code == user.country) { %>selected<% } %>><%= pays[i].nom %></option>
                          <% } %>
                        </select>
                        <span class="currency-badge-modern"><%= currency %></span>
                      </div>
                    </div>
                    <div class="col-md-6 col-sm-12 form-group-modern">
                      <label class="form-label-modern" for="city">
                        <i class="fas fa-city"></i>
                        Ville
                      </label>
                      <select class='form-select-modern' id="city" name="city">
                        <% pays.forEach((p)=> { %>
                          <% if(p.code == user.country) { %>
                            <% for(ville of p.cities) {%>
                              <% if(ville == user.city) { %>
                                <option value="<%=ville%>" selected><%= ville %></option>
                              <% } else { %>
                                <option value="<%=ville%>"><%= ville %></option>
                              <% } %>
                            <% } %>
                          <% } %>
                        <% }); %>
                      </select>
                    </div>
                  </div>

                  <div class="form-group-modern">
                    <label class="form-label-modern">
                      <i class="fas fa-envelope"></i>
                      Email
                    </label>
                    <input type="email" class="form-input-modern" name="email" placeholder="Votre adresse email" value="<%= user.email %>">
                  </div>

                  <div class="form-group-modern">
                    <label class="form-label-modern">
                      <i class="fas fa-list"></i>
                      Mode de retour produit
                    </label>
                    <select class="form-select-modern" name='product_return_type'>
                      <% retour_produits_types.forEach((p)=> { %>
                        <% if(p.type == user.product_return_type) { %>
                          <option value="<%= p.type %>" selected><%= p.nom %></option>
                        <% } else { %>
                          <option value="<%= p.type %>"><%= p.nom %></option>
                        <% } %>
                      <% }) %>
                    </select>
                  </div>

                  <div class="row">
                    <div class="col-md-6 col-sm-12 form-group-modern">
                      <label class="form-label-modern">
                        <i class="fas fa-bullseye"></i>
                        Objectif quotidien
                      </label>
                      <input type="number" class="form-input-modern" name="objective" placeholder="Objectif à atteindre par jour" value="<%= user.objective %>">
                    </div>
                    <div class="col-md-6 col-sm-12 form-group-modern">
                      <label class="form-label-modern">
                        <i class="fas fa-chair"></i>
                        Nombre de tables
                      </label>
                      <input type="number" class="form-input-modern" name="numberOfTables" placeholder="Nombre de tables" value="<%= user.numberOfTables %>">
                    </div>
                  </div>

                  <div class="text-center mt-4" id="element-save">
                    <button class="btn-save-modern" type="submit">
                      <i class="fas fa-save"></i>
                      Enregistrer les modifications
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
      </div>
    </div>

    </div>

    <div class="footer_part">
      <div class="container-fluid">
        <div class="row">
          <div class="col-lg-12">
            <div class="footer_iner text-center">
              <p>
                2025 © E-MAQUIS - Designed by <a href="https://haut-numerique.com">HNM</a> - <a href="/faq">FAQ</a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <div class="menu-overlay"></div>


  <div id="back-top" style="display: none">
    <a title="Go to Top" href="#">
      <i class="ti-angle-up"></i>
    </a>
  </div>
  <!-- footer  -->
  <!-- footer  -->
  <!-- jquery slim -->

  <script src="/socket.io/socket.io.js "></script>
  <script>
    const socket = io(window.location.origin + window.location.pathname);

    const currentRouteProfil = window.location.pathname;
    

    const driver = window.driver.js.driver;

const driverObj = driver({
  showProgress: true,
  showAnimation: true,
  animationDuration: 2000,
  showButtons: true,
  showBackButton: true,
  showResetButton: true,
  showCloseButton: true,
  showNextButton: true,
  showSkipButton: true,
  showPrevButton: true,
  showPauseButton: true,
  showPlayButton: true,
  showFullscreenButton: true,
  popoverClass: 'driverjs-theme',
  steps: [
    {
      element: "#element-nom",
      popover: {
        title: "Important",
        description: "Le champ Nom ne peut pas être vide. Veuillez le remplir."
      }
    },
    {
      element: "#element-prenom",
      popover: {
        title: "Attention",
        description: "Le champ Prénom ne peut pas être vide. Veuillez le remplir."
      }
    },
    {
      element: "#element-save",
      popover: {
        title: "Important",
        description: "Cliquez sur le bouton pour enregistrer les modifications afin de pouvoir charger les produits liés à votre pays"
      }
    }
  ]
});

const nom = '<%= user.nom %>'


if(nom.trim() === ''){
  driverObj.drive();
}

  



    $(document).ready(function() {

      //console.log(window.location.origin + window.location.pathname, "dfsfsd");

      //  chat box
      const inputPassword = $('input[name="newPassword"]');
      const inputConfirmPassword = $('input[name="confirmPassword"]');

      const onChangePassword = function(e) {

        const confirmValue = inputConfirmPassword.val();
        const passwordValue = inputPassword.val();

        if (confirmValue && confirmValue !== passwordValue) {
          inputConfirmPassword.removeClass('is-valid');
          inputConfirmPassword.addClass('is-invalid');
        } else if (confirmValue && confirmValue === passwordValue) {
          inputConfirmPassword.removeClass('is-invalid');
          inputConfirmPassword.addClass('is-valid');
        }

      }

      inputPassword.on('input', onChangePassword)

      inputConfirmPassword.on('input', onChangePassword)



    });

  </script>
<script>
  const countries = <%- JSON.stringify(pays) %>;
  const user_connected = <%- JSON.stringify(user) %>;
  $('#country').change(function() {
    const countryValue = $(this).val();
    const country = countries.find((c) => c.code === countryValue);
    $('#city').html('');
    if (country) {
      country.cities.forEach((ville) => {
        $('#city').append(`<option value="${ville}">${ville}</option>`);
      });
    }
  });
</script>
  <!-- Add Font Awesome for the lock icon -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"></script>

  <!-- Modal functionality -->
  <script>
    $(document).ready(function() {
      // Subscription Modal
      function openModal() {
        var modal = document.getElementById('subscriptionModal');
        if (modal) modal.style.display = 'block';
      }
      function closeModal() {
        var modal = document.getElementById('subscriptionModal');
        if (modal) modal.style.display = 'none';
      }
      $(document).on('click', '.premium-label[data-locked="true"], .lock-icon.lock-orange[data-locked="true"]', function(e) {
        e.preventDefault();
        openModal();
      });
      $(document).on('click', '.subscription-modal-close, .subscription-modal-button', function(e) {
        e.preventDefault();
        closeModal();
      });
      $(document).on('click', function(e) {
        var modal = document.getElementById('subscriptionModal');
        if (modal && e.target === modal) closeModal();
      });

      // Forfait Modal (même logique)
      function openForfaitModal() {
        var modal = document.getElementById('forfaitModal');
        if (modal) modal.style.display = 'block';
      }
      function closeForfaitModal() {
        var modal = document.getElementById('forfaitModal');
        if (modal) modal.style.display = 'none';
      }
      $(document).on('click', '#openForfaitModal', function(e) {
        e.preventDefault();
        openForfaitModal();
      });
      $(document).on('click', '.forfait-modal-close, .forfait-modal-button', function(e) {
        e.preventDefault();
        closeForfaitModal();
      });
      $(document).on('click', function(e) {
        var modal = document.getElementById('forfaitModal');
        if (modal && e.target === modal) closeForfaitModal();
      });
    });
  </script>

  <!-- jQuery  -->
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/bootstrap.bundle.min.js"></script>
  <script src="assets/js/metismenu.min.js"></script>
  <script src="assets/js/waves.js"></script>
  <script src="assets/js/simplebar.min.js"></script>



  <!-- Morris Js-->
  <script src="../plugins/morris-js/morris.min.js"></script>
  <!-- Raphael Js-->
  <script src="../plugins/raphael/raphael.min.js"></script>

  <!-- Morris Custom Js-->
  <script src="assets/pages/dashboard-demo.js"></script>

  <!-- App js -->
  <script src="assets/js/theme.js"></script>

  <!-- Subscription Modal -->
  <div id="subscriptionModal" class="subscription-modal">
    <div class="subscription-modal-content">
      <div class="subscription-modal-header">
                 <h2 class="subscription-modal-title">🔒 Fonctionnalité Premium</h2>
        <span class="subscription-modal-close">&times;</span>
      </div>
             <div class="subscription-modal-body" style="text-align:center; font-size:1.2rem; color:#FFA500; font-weight:600;">
         <p style="margin-bottom: 20px;">Pour activer cette fonctionnalité premium, cliquez sur "Voir les forfaits" ci-dessous.</p>
         
         <p style="margin-bottom: 15px; font-size: 1rem; color: #666;">Le paiement se fait automatiquement via Mobile Money (Moov, MTN, Orange) ou carte bancaire.</p>
         
         <p style="margin-bottom: 20px; font-size: 1rem; color: #666;">Besoin d'aide ? Contactez-nous sur WhatsApp :</p>
         
         <ul style="list-style-type: none; padding: 0; margin-bottom: 20px;">
           <li style="margin-bottom: 8px;">
             <a href="https://wa.me/33760484911" style="color: #25D366; text-decoration: none;">🇫🇷 +33 0760484911</a>
           </li>
           <li style="margin-bottom: 8px;">
             <a href="https://wa.me/2250709454685" style="color: #25D366; text-decoration: none;">🇨🇮 +225 0709454685</a>
           </li>
           <li style="margin-bottom: 8px;">
             <a href="https://wa.me/2250709031399" style="color: #25D366; text-decoration: none;">🇨🇮 +225 0709031399</a>
           </li>
           <li style="margin-bottom: 8px;">
             <a href="https://wa.me/2250777129951" style="color: #25D366; text-decoration: none;">🇨🇮 +225 0777129951</a>
           </li>
         </ul>
         
         <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 15px;">
           <p style="margin: 0; font-size: 0.95rem; color: #666;">
             💳 <strong>Paiement sécurisé</strong> - Votre transaction est protégée par CinetPay
           </p>
         </div>
       </div>
      <div class="subscription-modal-footer">
                 <button class="subscription-modal-button">Compris</button>
      </div>
    </div>
  </div>

  <!-- Modal Forfait -->
  <div id="forfaitModal" class="forfait-modal">
    <div class="forfait-modal-content">
      <span class="forfait-modal-close">&times;</span>
      <div class="forfait-modal-title">Choisissez votre forfait Premium</div>
      <div class="forfait-cards">
        <div class="forfait-card">
          <div class="forfait-icon"><i class="fas fa-unlock-alt"></i></div>
          <div class="forfait-price">7 000 F</div>
          <div class="forfait-desc">Débloquez <b>1 option premium</b> de votre choix<br><span style="color:#888; font-size:0.95em;">(mensuel)</span></div>
          <div style="margin-bottom: 12px;">
            <select id="premiumOptionSelect" class="form-control">
              <option value="hasSubCategories">Option nourriture</option>
              <option value="hasStock">Réserve de stock</option>
              <option value="hasOffer">Boissons offertes</option>
            </select>
          </div>
          <button class="forfait-btn" id="payOneOptionBtn">Payer via Mobile Money</button>
        </div>
        <div class="forfait-card popular">
          <div class="forfait-badge-popular">Le plus populaire</div>
          <div class="forfait-icon"><i class="fas fa-crown"></i></div>
          <div class="forfait-price">12 000 F</div>
          <div class="forfait-desc">Débloquez <b>les 3 options premium</b><br><span style="color:#888; font-size:0.95em;">(mensuel)</span></div>
          <button class="forfait-btn" id="payAllOptionsBtn">Tout débloquer via Mobile Money</button>
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.cinetpay.com/seamless/main.js"></script>
  <script>
    // Paiement forfait 1 option
    document.getElementById('payOneOptionBtn').onclick = function() {
      const selectedOption = document.getElementById('premiumOptionSelect').value;
      const userId = '<%= user?._id || user?.id %>';
      const userToken = localStorage.getItem('token');
      // Préparation des champs client avec fallback de test
      const customer_name = '<%= user?.nom || "TestNom" %>';
      const customer_surname = '<%= user?.prenoms || "TestPrenom" %>';
      const customer_email = '<%= user?.email || "test@email.com" %>';
      const customer_phone_number = '<%= user?.numero || "0102030405" %>';
      const customer_address = '<%= user?.adresse || "TestAdresse" %>';
      const customer_city = '<%= user?.city || "YAOUNDE" %>';
      const customer_country = '<%= (user?.country || "CM").toUpperCase().slice(0,2) %>';
      const customer_state = '<%= (user?.country || "CM").toUpperCase().slice(0,2) %>';
      const customer_zip_code = '00000';
      const params = {
        transaction_id: Math.floor(Math.random() * 100000000).toString(),
        amount: 7000,
        currency: 'XOF',
        channels: 'ALL',
        description: 'Abonnement 1 option premium',
        customer_name,
        customer_surname,
        customer_email,
        customer_phone_number,
        customer_address,
        customer_city,
        customer_country,
        customer_state,
        customer_zip_code
      };
      console.log('CinetPay params (1 option):', params);
      CinetPay.setConfig({
        apikey: '212203080763d5904661eff5.58954293',
        site_id: '397031',
        notify_url: 'http://mondomaine.com/notify/',
        mode: 'PRODUCTION'
      });
      CinetPay.getCheckout(params);
      CinetPay.waitResponse(function(data) {
        if (data.status === "ACCEPTED") {
          fetch('/api/settings/activate-options', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'token': userToken || ''
            },
            body: JSON.stringify({ userId: userId, options: [selectedOption] })
          })
          .then(response => response.json())
          .then(result => {
            alert('Option premium activée avec succès !');
            window.location.reload();
          })
          .catch(error => {
            alert("Paiement réussi, mais erreur lors de l'activation de l'option premium.");
            window.location.reload();
          });
        } else if (data.status === "REFUSED") {
          alert("Votre paiement a échoué");
        }
      });
      CinetPay.onError(function(data) {
        alert("Erreur de paiement : " + JSON.stringify(data));
      });
    };

    // Paiement forfait toutes options
    document.getElementById('payAllOptionsBtn').onclick = function() {
      const userId = '<%= user?._id || user?.id %>';
      const userToken = localStorage.getItem('token');
      // Préparation des champs client avec fallback de test
      const customer_name = '<%= user?.nom || "TestNom" %>';
      const customer_surname = '<%= user?.prenoms || "TestPrenom" %>';
      const customer_email = '<%= user?.email || "test@email.com" %>';
      const customer_phone_number = '<%= user?.numero || "0102030405" %>';
      const customer_address = '<%= user?.adresse || "TestAdresse" %>';
      const customer_city = '<%= user?.city || "YAOUNDE" %>';
      const customer_country = '<%= (user?.country || "CM").toUpperCase().slice(0,2) %>';
      const customer_state = '<%= (user?.country || "CM").toUpperCase().slice(0,2) %>';
      const customer_zip_code = '00000';
      const params = {
        transaction_id: Math.floor(Math.random() * 100000000).toString(),
        amount: 12000,
        currency: 'XOF',
        channels: 'ALL',
        description: 'Abonnement toutes options premium',
        customer_name,
        customer_surname,
        customer_email,
        customer_phone_number,
        customer_address,
        customer_city,
        customer_country,
        customer_state,
        customer_zip_code
      };
      console.log('CinetPay params (all options):', params);
      CinetPay.setConfig({
        apikey: '212203080763d5904661eff5.58954293',
        site_id: '397031',
        notify_url: 'http://mondomaine.com/notify/',
        mode: 'PRODUCTION'
      });
      CinetPay.getCheckout(params);
      CinetPay.waitResponse(function(data) {
        if (data.status === "ACCEPTED") {
          fetch('/api/settings/activate-options', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'token': userToken || ''
            },
            body: JSON.stringify({ userId: userId, options: ["hasStock","hasOffer","hasSubCategories"] })
          })
          .then(response => response.json())
          .then(result => {
            alert('Toutes les options premium sont activées !');
            window.location.reload();
          })
          .catch(error => {
            alert("Paiement réussi, mais erreur lors de l'activation des options premium.");
            window.location.reload();
          });
        } else if (data.status === "REFUSED") {
          alert("Votre paiement a échoué");
        }
      });
      CinetPay.onError(function(data) {
        alert("Erreur de paiement : " + JSON.stringify(data));
      });
    };
  </script>
</body>

</html>